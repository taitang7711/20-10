<!DOCTYPE html>
<html lang="vi">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Hạnh phúc nha 💙</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/gsap/3.12.2/gsap.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/gsap/3.12.2/ScrollTrigger.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/swiper@10/swiper-bundle.min.js"></script>
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/swiper@10/swiper-bundle.min.css">
    <link
        href="https://fonts.googleapis.com/css2?family=Dancing+Script:wght@400;600;700&family=Great+Vibes&family=Nunito:wght@300;400;600;700&display=swap"
        rel="stylesheet">
    <link rel="stylesheet" href="styles.css">
    <style>
        :root {
            --pink: #A7C7E7;
            --cream: #F0F8FF;
            --lavender: #B0D4F1;
            --yellow: #C9E4F7;
        }

        body {
            background: linear-gradient(45deg, var(--cream) 0%, var(--pink) 50%, var(--lavender) 100%);
            font-family: 'Nunito', sans-serif;
            overflow-x: hidden;
        }

        .dancing-script {
            font-family: 'Times New Roman', Times, serif;
        }

        .great-vibes {
            font-family: 'Great Vibes', cursive;
        }

        .floating-hearts {
            position: fixed;
            pointer-events: none;
            z-index: 0;
        }

        .floating-hearts::before {
            content: '💙';
            position: absolute;
            animation: float 6s ease-in-out infinite;
        }

        @keyframes float {

            0%,
            100% {
                transform: translateY(0px) rotate(0deg);
                opacity: 0.7;
            }

            50% {
                transform: translateY(-20px) rotate(5deg);
                opacity: 1;
            }
        }

        .heartbeat {
            animation: heartbeat 1.5s ease-in-out infinite;
        }

        @keyframes heartbeat {

            0%,
            100% {
                transform: scale(1);
            }

            25% {
                transform: scale(1.1);
            }

            50% {
                transform: scale(1.05);
            }

            75% {
                transform: scale(1.1);
            }
        }

        .letter-paper {
            background: linear-gradient(45deg, #fefefe 0%, #f9f9f9 100%);
            box-shadow: 0 10px 30px rgba(0, 0, 0, 0.1);
            position: relative;
        }

        .letter-paper::before {
            content: '';
            position: absolute;
            left: 20px;
            top: 0;
            bottom: 0;
            width: 10px;
            background: #6B9BD1;
        }

        .typewriter {
            overflow: hidden;
            border-right: 2px solid #6B9BD1;
            white-space: nowrap;
            animation: typing 3.5s steps(40, end), blink-caret 0.75s step-end infinite;
        }

        @keyframes typing {
            from {
                width: 0;
            }

            to {
                width: 100%;
            }
        }

        @keyframes blink-caret {

            from,
            to {
                border-color: transparent;
            }

            50% {
                border-color: #6B9BD1;
            }
        }

        .flower {
            cursor: pointer;
            transition: all 0.3s ease;
        }

        .flower:hover {
            transform: scale(1.2) rotate(10deg);
        }

        /* NEW MEMORY SECTION - Clean & Mobile Optimized */
        .memory-card {
            position: relative;
            width: 100%;
            height: 400px;
            border-radius: 16px;
            overflow: hidden;
            box-shadow: 0 8px 32px rgba(0, 0, 0, 0.15);
            background: #fff;
            margin: 0 auto;
        }

        .memory-img {
            width: 100%;
            height: 100%;
            object-fit: cover;
            object-position: center;
            filter: brightness(1.1) contrast(1.1) saturate(1.2);
            transition: all 0.3s ease;
        }

        .memory-overlay {
            position: absolute;
            bottom: 0;
            left: 0;
            right: 0;
            background: linear-gradient(transparent, rgba(0, 0, 0, 0.75));
            padding: 35px 25px 25px;
            transform: translateY(0);
            transition: all 0.3s ease;
        }

        .memory-text {
            color: #ffffff;
            font-size: 1.2rem;
            font-weight: 600;
            text-align: center;
            margin: 0;
            font-family: 'Dancing Script', cursive;
            line-height: 1.4;
            text-shadow: 3px 3px 10px rgba(0, 0, 0, 0.9);
            opacity: 1;
            visibility: visible;
            display: block;
        }

        .memory-card:hover .memory-img {
            transform: scale(1.05);
            filter: brightness(1.2) contrast(1.2) saturate(1.3);
        }

        .memory-card:hover .memory-overlay {
            background: linear-gradient(transparent, rgba(0, 0, 0, 0.85));
            padding: 40px 25px 30px;
        }

        .memory-card:hover .memory-text {
            font-size: 1.25rem;
            text-shadow: 4px 4px 12px rgba(0, 0, 0, 1);
        }

        /* Mobile Optimized - Compact & Square-like */
        @media (max-width: 768px) {
            .memory-card {
                height: 320px;
                /* More square-like on mobile */
                border-radius: 12px;
                max-width: 90vw;
                /* Prevent overflow */
            }

            .memory-text {
                font-size: 1rem;
                line-height: 1.3;
                padding: 0 10px;
            }

            .memory-overlay {
                padding: 25px 20px 20px;
            }

            /* Reduce section padding on mobile */
            #memories.section {
                padding: 40px 0 60px 0;
                min-height: auto;
            }

            .memoriesSwiper {
                padding-bottom: 40px;
            }
        }

        @media (max-width: 480px) {
            .memory-card {
                height: 280px;
                /* Perfect square for small screens */
                border-radius: 10px;
                max-width: 85vw;
            }

            .memory-text {
                font-size: 0.9rem;
                line-height: 1.25;
            }

            .memory-overlay {
                padding: 20px 15px 15px;
            }

            /* Further reduce section spacing */
            #memories.section {
                padding: 30px 0 50px 0;
            }

            .memoriesSwiper {
                padding-bottom: 35px;
            }

            /* Adjust title spacing */
            #memories h2 {
                margin-bottom: 1.5rem !important;
            }
        }

        /* Swiper container optimization for new design */
        .memoriesSwiper {
            padding-bottom: 50px;
            overflow: visible;
        }

        .memoriesSwiper .swiper-slide {
            height: auto;
            display: flex;
            align-items: center;
            justify-content: center;
        }

        /* Mobile container optimization */
        @media (max-width: 768px) {
            .max-w-6xl {
                max-width: 100%;
                padding: 0 1rem;
            }

            .memoriesSwiper {
                margin: 0 -1rem;
                padding: 0 1rem 40px;
            }
        }

        @media (max-width: 480px) {
            .memoriesSwiper {
                margin: 0 -0.5rem;
                padding: 0 0.5rem 35px;
            }
        }

        .glow {
            box-shadow: 0 0 20px rgba(167, 199, 231, 0.6);
        }

        .section {
            min-height: 100vh;
            display: flex;
            align-items: center;
            justify-content: center;
            position: relative;
            z-index: 10;
        }

        .parallax-text {
            transform: translateY(100px);
            opacity: 0;
        }

        .sunset-bg {
            background: linear-gradient(180deg, #FFF3B0 0%, #FFC1CC 50%, #C6B8E9 100%);
        }

        /* Button gradient animation */
        @keyframes gradientShift {
            0% {
                background-position: 0% 50%;
            }

            50% {
                background-position: 100% 50%;
            }

            100% {
                background-position: 0% 50%;
            }
        }

        /* Enhanced button visibility */
        #startBtn {
            background: linear-gradient(45deg, #4A90E2, #6B9BD1, #4A90E2) !important;
            background-size: 200% 200% !important;
            animation: gradientShift 3s ease infinite !important;
            color: white !important;
            font-weight: 700 !important;
            text-shadow: 2px 2px 4px rgba(0, 0, 0, 0.5) !important;
        }

        #startBtn span {
            color: white !important;
            text-shadow: 2px 2px 4px rgba(0, 0, 0, 0.5) !important;
        }

        /* Simple animations for decorations */
        @keyframes spin {
            from {
                transform: rotate(0deg);
            }

            to {
                transform: rotate(360deg);
            }
        }

        @keyframes bounce {

            0%,
            20%,
            50%,
            80%,
            100% {
                transform: translateY(0);
            }

            40% {
                transform: translateY(-10px);
            }

            60% {
                transform: translateY(-5px);
            }
        }
    </style>
</head>

<body>
    <!-- Background Music -->
    <audio id="backgroundMusic" loop preload="auto">
        <source src="music/music.mp3" type="audio/mpeg">
    </audio>

    <!-- Floating Hearts Background -->
    <div class="floating-hearts" style="top: 10%; left: 10%;"></div>
    <div class="floating-hearts" style="top: 20%; right: 15%; animation-delay: 2s;"></div>
    <div class="floating-hearts" style="top: 60%; left: 20%; animation-delay: 4s;"></div>
    <div class="floating-hearts" style="bottom: 30%; right: 10%; animation-delay: 1s;"></div>
    <div class="floating-hearts" style="bottom: 10%; left: 50%; animation-delay: 3s;"></div>

    <!-- Section 1: Trang mở đầu -->
    

    <!-- Section 2: Câu chuyện & lời xin lỗi -->
    

    <!-- Section 3: Hồi ức ngọt ngào - Redesigned -->
 

    <!-- Section 4: Thư tình -->
    <section id="letter" class="section bg-gradient-to-b from-blue-50 to-sky-100">
        <div class="max-w-4xl mx-auto px-6">
            <div class="letter-paper rounded-lg p-8 md:p-12">
                <h2 class="text-3xl md:text-4xl great-vibes text-center text-blue-700 mb-8">💙💙💙 Chúc em luôn hạnh phúc nhé !!! 💙💙💙</h2>

                <div class="letter-content space-y-4 text-gray-700">
                    <p class="text-lg md:text-xl leading-relaxed dancing-script">
                        Anh muốn viết cho em một lần cuối cùng — không phải để giữ em lại, không phải để khiến em phải suy nghĩ hay bận lòng, mà chỉ để nói ra những điều anh đã giữ trong lòng suốt một năm qua.<br>
                    </p>

                    <p class="text-lg md:text-xl leading-relaxed dancing-script">
                        Một năm qua, có rất nhiều điều anh muốn nói, nhưng anh đã chọn im lặng vì sợ làm em mệt, sợ khiến em phải gồng thêm, sợ em phải đứng giữa những điều mà lẽ ra em không nên chịu.<br>
                        Anh im lặng… không phải vì hết thương, cũng không phải vì muốn biến mất khỏi cuộc sống của em.<br>
                    </p>

                    <p class="text-lg md:text-xl leading-relaxed dancing-script text-blue-700 font-semibold">
                        Anh im lặng vì anh sợ.
                    </p>

                    <p class="text-lg md:text-xl leading-relaxed dancing-script">
                        Anh sợ rằng nếu anh tiến thêm, gánh nặng trên vai em sẽ lớn hơn.<br>
                        Anh sợ em phải chọn giữa gia đình và người em thương.<br>
                        Anh sợ em lại rơi vào cảm giác áp lực, mệt mỏi, giằng co giống như những gì anh từng thấy ở em.<br>
                    </p>

                    <p class="text-lg md:text-xl leading-relaxed dancing-script">
                        Anh thấy em đã chịu rất nhiều: áp lực từ gia đình, những lời nói không dễ nghe, những cảm xúc mà em không biết chia sẻ với ai.<br>
                        Anh thấy em gồng, thấy em cố, thấy em mệt… nhưng vẫn im lặng chịu đựng.<br>
                    </p>

                    <p class="text-lg md:text-xl leading-relaxed dancing-script">
                        Và chính vì biết những điều đó, anh không dám tiến thêm một bước nào nữa.<br>
                        Không phải vì anh không muốn đến gần em — mà vì anh không muốn em phải chịu thêm một giọt nước mắt nào vì anh.<br>
                    </p>

                    <p class="text-lg md:text-xl leading-relaxed dancing-script">
                        Trong suốt thời gian đó, anh mang tất cả cảm xúc về phía mình.<br>
                        Đêm mở tin nhắn của em rồi đóng lại, gõ vài câu rồi xóa, muốn nói rất nhiều nhưng lại không dám gửi — vì sợ làm em khó xử, sợ khiến em phải suy nghĩ.<br>
                    </p>

                    <p class="text-lg md:text-xl leading-relaxed dancing-script">
                        Anh chọn im lặng để em được nhẹ lòng.<br>
                        Nhưng sự im lặng đó lại khiến anh phải chống chọi với chính trái tim mình mỗi ngày.<br>
                    </p>

                    <p class="text-lg md:text-xl leading-relaxed dancing-script">
                        Anh nhớ em nhiều đến mức chỉ cần thấy tên em đâu đó thôi, tim anh cũng thắt lại.<br>
                        Nhưng anh vẫn không nhắn, vì anh sợ làm em phải gồng thêm một lần nữa.<br>
                        Anh sợ chính sự xuất hiện của anh lại khiến em mệt.<br>
                    </p>

                    <p class="text-lg md:text-xl leading-relaxed dancing-script">
                        Anh đã tự hỏi mình rất nhiều:<br>
                        tại sao anh lại chọn đau như vậy,<br>
                        tại sao anh lại tự đẩy mình vào im lặng,<br>
                        tại sao anh lại để mọi thứ đi xa hơn.
                    </p>

                    <p class="text-lg md:text-xl leading-relaxed dancing-script">
                        Nhưng cuối cùng, anh hiểu ra rằng:<br>
                        anh làm vậy chỉ vì muốn em được bình yên.
                    </p>

                    <p class="text-lg md:text-xl leading-relaxed dancing-script">
                        Anh cũng không trách em, không trách bản thân, không trách gia đình em, và không trách hoàn cảnh.<br>
                        Ai cũng chỉ làm điều tốt nhất trong khả năng của họ.<br>
                        Gia đình em thương em theo cách của họ, anh hiểu điều đó.<br>
                        Còn em… em đã cố nhiều hơn bất kỳ ai.
                    </p>

                    <p class="text-lg md:text-xl leading-relaxed dancing-script">
                        Bây giờ nhìn em mạnh mẽ hơn, bình yên hơn, có cuộc sống mới, anh mừng cho em thật lòng.<br>
                        Anh biết em đang giữ khoảng cách với anh — không phải vì em ghét anh hay vì em tuyệt tình, mà chỉ vì em muốn mọi thứ được dễ dàng, muốn anh không đau, muốn bản thân em cũng không vướng thêm cảm xúc nào nữa.<br>
                    </p>

                    <p class="text-lg md:text-xl leading-relaxed dancing-script">
                        Anh hiểu.
                        Và anh không giận em, chưa bao giờ giận.<br>
                        Chỉ là… thỉnh thoảng anh chưa quen với cảm giác đó thôi.<br>
                        Nhưng anh tôn trọng tất cả.<br>
                    </p>

                    <p class="text-lg md:text-xl leading-relaxed dancing-script">
                        Anh đã từng tiếc, từng tự trách, từng mong có thể quay lại để làm tốt hơn…<br>
                        nhưng giờ anh nghĩ đủ rồi.<br>
                        Anh đã nói hết lòng mình, và anh không muốn làm em khó xử thêm lần nào nữa.<br>
                    </p>

                    <p class="text-lg md:text-xl leading-relaxed dancing-script font-semibold text-blue-800">
                        Và từ hôm nay trở về sau,<br>
                        anh sẽ không bước vào cuộc sống của em nữa.<br>
                    </p>

                    <p class="text-lg md:text-xl leading-relaxed dancing-script">
                        Anh sẽ không làm phiền, không nhắn, không gọi, không khiến em phải suy nghĩ hay áy náy bất kỳ điều gì.<br>
                        Khoảng cách mà em đang giữ là anh hiểu — và anh tôn trọng tuyệt đối.<br>
                    </p>

                    <p class="text-lg md:text-xl leading-relaxed dancing-script">
                        Anh chỉ mong em tiếp tục sống một cuộc đời thật đẹp — một cuộc đời mà em xứng đáng.<br>
                        Hãy vui với hiện tại, hãy để quá khứ ngủ yên.<br>
                        Hãy luôn cười, luôn nhẹ lòng, luôn hồn nhiên như ngày đầu anh gặp em.<br>
                    </p>

                    <p class="text-lg md:text-xl leading-relaxed dancing-script">
                        Em hãy nhớ:<br>
                        đừng suy nghĩ nhiều,<br>
                        đừng để chuyện nhỏ làm buồn,<br>
                        và cũng đừng để ghen tuông vô cớ khiến mối quan hệ mới của em xảy ra xung đột không đáng có.<br>
                        Em xứng đáng có một tình yêu nhẹ nhàng, không áp lực, không tổn thương.
                    </p>

                    <p class="text-lg md:text-xl leading-relaxed dancing-script font-semibold text-blue-800">
                        Và điều quan trọng nhất —<br>
                        em đừng buồn vì anh.
                    </p>

                    <p class="text-lg md:text-xl leading-relaxed dancing-script">
                        Đừng áy náy, đừng thấy có lỗi, đừng mang theo điều gì nặng nề trong lòng.<br>
                        Anh hiện tại vẫn ổn, vẫn mạnh mẽ, vẫn sống được.<br>
                        Năm trước anh không giận em,<br>
                        bây giờ anh cũng không giận.<br>
                        Anh chưa từng giận em một lần nào.
                    </p>

                    <p class="text-lg md:text-xl leading-relaxed dancing-script">
                        Tất cả những gì anh giữ trong lòng chỉ là sự trân trọng và lời chúc.
                    </p>

                    <p class="text-lg md:text-xl leading-relaxed dancing-script font-semibold text-blue-800">
                        Cảm ơn em vì đã từng đến.<br>
                        Cảm ơn em vì những ký ức đẹp, dù có chút đau nhưng anh vẫn trân quý.<br>
                        Cảm ơn em vì từng thương anh theo cách của riêng em.
                    </p>

                    <p class="text-lg md:text-xl leading-relaxed dancing-script">
                        Nếu em đọc đến đây, anh mong trái tim em sẽ nhẹ hơn chứ không nặng.<br>
                        Và anh hy vọng cuộc sống sau này của em — dù đi cùng ai, dù chọn con đường nào — cũng sẽ luôn tràn đầy niềm vui.<br>
                    </p>

                    <p class="text-lg md:text-xl leading-relaxed dancing-script">
                        Anh mong mỗi ngày em đều bình yên.<br>
                        Anh mong nụ cười của em sẽ không bao giờ tắt.<br>
                        Anh mong em luôn hạnh phúc rạng rỡ —<br>
                        như cách anh đã từng mong cho em từ ngày đầu tiên
                    </p>
                </div>

                

            </div>
        </div>
    </section>

    <!-- Section 5: Tương tác nhỏ dễ thương -->
   

    <!-- Section 6: Phần kết -->
    <!-- <section id="ending" class="section bg-gradient-to-b from-blue-100 to-sky-200">
        <div class="max-w-4xl mx-auto px-6 text-center">
            <div class="ending-content">
                <h2 class="text-4xl md:text-6xl great-vibes text-blue-800 mb-8">Lời chúc cuối cùng...</h2>

                <p class="text-xl md:text-2xl dancing-script text-blue-700 mb-12 leading-relaxed">
                    Mong em luôn cười thật vui, thật hạnh phúc, thật rạng rỡ — như cách anh từng mong em sẽ được như vậy trong cuộc đời mình.
                </p>

                <button id="finalBtn"
                    class="bg-gradient-to-r from-blue-400 to-sky-400 hover:from-blue-500 hover:to-sky-500 text-white px-12 py-6 rounded-full text-xl dancing-script transition-all duration-300 transform hover:scale-105 shadow-xl">
                    Cảm ơn em 💙
                </button>
            </div>
        </div>
    </section> -->

    <!-- Music Control -->
    <!-- <div class="fixed bottom-4 right-4 z-50">
        <button id="musicToggle"
            class="bg-blue-400 hover:bg-blue-500 text-white p-3 rounded-full shadow-lg transition-all duration-300">
            🎵
        </button>
    </div> -->

    <script>
        // Register ScrollTrigger plugin
        gsap.registerPlugin(ScrollTrigger);

        // Music control
        const bgMusic = document.getElementById('backgroundMusic');
        const musicToggle = document.getElementById('musicToggle');
        let isPlaying = false;




        musicToggle.addEventListener('click', () => {
            if (isPlaying) {
                bgMusic.pause();
                musicToggle.textContent = '🎵';
            } else {
                bgMusic.play();
                musicToggle.textContent = '⏸️';
            }
            isPlaying = !isPlaying;
        });

        //Auto play music when user interacts
        document.addEventListener('click', () => {
            if (!isPlaying) {
                bgMusic.play().then(() => {
                    musicToggle.textContent = '⏸️';
                    isPlaying = true;
                }).catch(e => {
                    console.log('Auto-play failed:', e);
                });
            }
        }, { once: true });

        // Add music visualization effect for letter section
        bgMusic.addEventListener('play', () => {
            const letterSection = document.querySelector('#letter');
            if (letterSection && letterSection.getBoundingClientRect().top < window.innerHeight) {
                letterSection.classList.add('music-playing');
                createMusicVisualization();
            }
        });

        bgMusic.addEventListener('pause', () => {
            const letterSection = document.querySelector('#letter');
            if (letterSection) {
                letterSection.classList.remove('music-playing');
            }

            // Sửa cách gọi removeSubtitle - lấy element thay vì string
            const subtitleContainer = document.getElementById('subtitle-container');
            if (subtitleContainer) {
                // Nếu bạn muốn dùng hàm từ class RomanticWebsite
                // Cần access đến instance của class
                if (window.romanticWebsite && window.romanticWebsite.removeSubtitle) {
                    window.romanticWebsite.removeSubtitle(subtitleContainer);
                } else {
                    // Hoặc tạo một hàm removeSubtitle đơn giản ngay trong index.html
                    gsap.to(subtitleContainer, {
                        y: -20,
                        opacity: 0,
                        duration: 0.3,
                        ease: "power2.in",
                        onComplete: () => {
                            subtitleContainer.textContent = '';
                            subtitleContainer.style.opacity = '0';
                        }
                    });
                }
            }
        });

        // Intro animations
        gsap.timeline()
            .set('.intro-content', { opacity: 1 }) // Ensure content is visible immediately
            .set('#startBtn', { scale: 1, opacity: 1, visibility: 'visible' }) // Force button to be visible
            .from('.intro-image', {
                duration: 2,
                scale: 0,
                rotation: 360,
                ease: "back.out(1.7)"
            })
            .from('.intro-title', {
                duration: 1.5,
                opacity: 0,
                y: 30,
                ease: "power2.out"
            }, "-=1")
            .from('.intro-subtitle', {
                duration: 1.5,
                opacity: 0,
                y: 30,
                ease: "power2.out"
            }, "-=0.7")
            .from('.intro-greeting', {
                duration: 1.2,
                opacity: 0,
                y: 20,
                scale: 0.9,
                ease: "back.out(1.7)"
            }, "-=0.3");

        // Force button visibility after page load
        document.addEventListener('DOMContentLoaded', function () {
            const startBtn = document.getElementById('startBtn');
            if (startBtn) {
                startBtn.style.transform = 'scale(1)';
                startBtn.style.opacity = '1';
                startBtn.style.visibility = 'visible';
                startBtn.style.display = 'inline-block';
            }
        });

        // Also ensure visibility after a short delay
        setTimeout(() => {
            const startBtn = document.getElementById('startBtn');
            if (startBtn) {
                startBtn.style.transform = 'scale(1) !important';
                startBtn.style.opacity = '1 !important';
                startBtn.style.visibility = 'visible !important';
                startBtn.style.display = 'inline-block !important';
            }
        }, 100);

        // Enhanced start button functionality
        document.getElementById('startBtn').addEventListener('click', (e) => {
            // Create explosion effect
            createButtonExplosion(e.target);

            // Add screen flash effect
            createScreenFlash();

            // Smooth scroll with enhanced animation
            gsap.to(window, {
                duration: 2.5,
                scrollTo: "#story",
                ease: "power2.inOut"
            });

            // Start background music if not already playing
            if (!isPlaying) {
                bgMusic.play();
                musicToggle.textContent = '⏸️';
                isPlaying = true;
            }
        });

        // Enhanced intro image interactions
        const introImage = document.querySelector('.intro-image');
        if (introImage) {
            introImage.addEventListener('mouseenter', () => {
                gsap.to(introImage, {
                    scale: 1.1,
                    rotation: 5,
                    duration: 0.5,
                    ease: "power2.out"
                });
                createImageSparkles(introImage);
            });

            introImage.addEventListener('mouseleave', () => {
                gsap.to(introImage, {
                    scale: 1,
                    rotation: 0,
                    duration: 0.5,
                    ease: "power2.out"
                });
            });

            introImage.addEventListener('click', () => {
                createHeartBurst(introImage);
                playLoveSound();
            });
        }

        // Enhanced greeting message interactions
        const greetingMessage = document.querySelector('.intro-greeting');
        if (greetingMessage) {
            greetingMessage.addEventListener('mouseenter', () => {
                gsap.to(greetingMessage, {
                    scale: 1.05,
                    duration: 0.3,
                    ease: "power2.out"
                });
                createGreetingSparkles(greetingMessage);
            });

            greetingMessage.addEventListener('mouseleave', () => {
                gsap.to(greetingMessage, {
                    scale: 1,
                    duration: 0.3,
                    ease: "power2.out"
                });
            });

            greetingMessage.addEventListener('click', () => {
                createGreetingCelebration(greetingMessage);
            });
        }

        // Parallax text animations
        gsap.utils.toArray('.parallax-text').forEach(text => {
            gsap.fromTo(text, {
                y: 100,
                opacity: 0
            }, {
                y: 0,
                opacity: 1,
                duration: 1.5,
                ease: "power2.out",
                scrollTrigger: {
                    trigger: text,
                    start: "top 80%",
                    end: "bottom 20%",
                    toggleActions: "play none none reverse"
                }
            });
        });

        // Swiper initialization
        const swiper = new Swiper('.memoriesSwiper', {
            loop: true,
            autoplay: {
                delay: 4000,
                disableOnInteraction: false,
                pauseOnMouseEnter: true,
            },
            pagination: {
                el: '.swiper-pagination',
                clickable: true,
                dynamicBullets: true,
            },
            slidesPerView: 1,
            spaceBetween: 15,
            centeredSlides: true,
            grabCursor: true,
            effect: 'slide',
            speed: 600,
            breakpoints: {
                480: {
                    slidesPerView: 1,
                    spaceBetween: 15,
                    centeredSlides: true,
                },
                640: {
                    slidesPerView: 1.1,
                    spaceBetween: 20,
                    centeredSlides: true,
                },
                768: {
                    slidesPerView: 1.3,
                    spaceBetween: 25,
                    centeredSlides: true,
                },
                1024: {
                    slidesPerView: 1.8,
                    spaceBetween: 30,
                    centeredSlides: true,
                },
                1280: {
                    slidesPerView: 2.2,
                    spaceBetween: 30,
                    centeredSlides: true,
                }
            },
            // Ensure text visibility on all slides
            on: {
                slideChange: function () {
                    // Force text to be visible on all slides
                    document.querySelectorAll('.swiper-slide p').forEach(p => {
                        p.style.display = 'block';
                        p.style.visibility = 'visible';
                        p.style.opacity = '1';
                        p.style.color = 'white';
                    });
                },
                init: function () {
                    // Force text to be visible on initialization
                    setTimeout(() => {
                        document.querySelectorAll('.swiper-slide p').forEach(p => {
                            p.style.display = 'block';
                            p.style.visibility = 'visible';
                            p.style.opacity = '1';
                            p.style.color = 'white';
                        });
                    }, 100);
                }
            }
        });

        // Heart button functionality
        document.getElementById('heartBtn').addEventListener('click', () => {
            const heartMessage = document.getElementById('heartMessage');
            heartMessage.style.opacity = '1';

            // Add faster heartbeat animation
            document.getElementById('heartBtn').style.animation = 'heartbeat 0.5s ease-in-out infinite';

            // Create floating hearts
            createFloatingHearts();
        });

        // Flower click functionality
        document.querySelectorAll('.flower').forEach(flower => {
            flower.addEventListener('click', () => {
                const message = flower.getAttribute('data-message');
                const messageDiv = document.getElementById('flowerMessage');

                messageDiv.textContent = message;
                messageDiv.style.opacity = '1';

                // Create flower petals effect
                createPetals(flower);

                setTimeout(() => {
                    messageDiv.style.opacity = '0';
                }, 3000);
            });
        });

        // Final button
        document.getElementById('finalBtn').addEventListener('click', () => {
            //alert('Cảm ơn em đã đọc hết! Anh hy vọng em sẽ cho anh một cơ hội. 💗');

            // Show thank you message
            const thankYouMessage = document.createElement('div');
            thankYouMessage.innerHTML = 'Cảm ơn em đã đọc hết. Anh chúc em luôn hạnh phúc. 💙';
            thankYouMessage.className = 'mt-8 text-xl md:text-2xl dancing-script text-blue-700 bg-white bg-opacity-80 rounded-2xl px-8 py-6 shadow-lg backdrop-blur-sm border-2 border-blue-200 opacity-0 transform scale-95 transition-all duration-500';

            // Insert the message after the button
            document.getElementById('finalBtn').parentNode.appendChild(thankYouMessage);

            // Animate the message appearance
            setTimeout(() => {
                thankYouMessage.style.opacity = '1';
                thankYouMessage.style.transform = 'scale(1)';
            }, 300);

            // Create celebration effect
            createButtonExplosion(document.getElementById('finalBtn'));
            createScreenFlash();
        });

        // Create floating hearts function
        function createFloatingHearts() {
            for (let i = 0; i < 10; i++) {
                setTimeout(() => {
                    const heart = document.createElement('div');
                    heart.textContent = '💙';
                    heart.style.position = 'fixed';
                    heart.style.left = Math.random() * window.innerWidth + 'px';
                    heart.style.top = window.innerHeight + 'px';
                    heart.style.fontSize = '2rem';
                    heart.style.pointerEvents = 'none';
                    heart.style.zIndex = '100';

                    document.body.appendChild(heart);

                    gsap.to(heart, {
                        y: -window.innerHeight - 100,
                        x: (Math.random() - 0.5) * 200,
                        rotation: Math.random() * 360,
                        duration: 4,
                        ease: "power1.out",
                        onComplete: () => {
                            heart.remove();
                        }
                    });
                }, i * 200);
            }
        }

        // Create button explosion effect
        function createButtonExplosion(button) {
            const rect = button.getBoundingClientRect();
            const centerX = rect.left + rect.width / 2;
            const centerY = rect.top + rect.height / 2;

            const emojis = ['💙', '💙', '🌊', '✨', '💫', '🦋', '💙', '💙', '✨', '💙'];

            for (let i = 0; i < 20; i++) {
                const element = document.createElement('div');
                element.textContent = emojis[Math.floor(Math.random() * emojis.length)];
                element.style.position = 'fixed';
                element.style.left = centerX + 'px';
                element.style.top = centerY + 'px';
                element.style.pointerEvents = 'none';
                element.style.zIndex = '1000';
                element.style.fontSize = (1 + Math.random()) + 'rem';

                document.body.appendChild(element);

                const angle = (i / 20) * Math.PI * 2;
                const distance = 150 + Math.random() * 100;

                gsap.to(element, {
                    x: Math.cos(angle) * distance,
                    y: Math.sin(angle) * distance - Math.random() * 100,
                    scale: 0,
                    opacity: 0,
                    rotation: Math.random() * 720,
                    duration: 2 + Math.random(),
                    ease: "power2.out",
                    onComplete: () => element.remove()
                });
            }
        }

        // Create screen flash effect
        function createScreenFlash() {
            const flash = document.createElement('div');
            flash.style.position = 'fixed';
            flash.style.inset = '0';
            flash.style.background = 'radial-gradient(circle, rgba(167,199,231,0.8) 0%, transparent 70%)';
            flash.style.pointerEvents = 'none';
            flash.style.zIndex = '9999';
            flash.style.opacity = '0';

            document.body.appendChild(flash);

            gsap.timeline()
                .to(flash, { opacity: 1, duration: 0.1 })
                .to(flash, { opacity: 0, duration: 0.5, onComplete: () => flash.remove() });
        }

        // Create image sparkles
        function createImageSparkles(image) {
            const rect = image.getBoundingClientRect();

            for (let i = 0; i < 15; i++) {
                const sparkle = document.createElement('div');
                sparkle.textContent = '✨';
                sparkle.style.position = 'fixed';
                sparkle.style.left = (rect.left + Math.random() * rect.width) + 'px';
                sparkle.style.top = (rect.top + Math.random() * rect.height) + 'px';
                sparkle.style.pointerEvents = 'none';
                sparkle.style.zIndex = '1000';
                sparkle.style.fontSize = (0.5 + Math.random() * 0.5) + 'rem';

                document.body.appendChild(sparkle);

                gsap.to(sparkle, {
                    y: -50 - Math.random() * 50,
                    x: (Math.random() - 0.5) * 100,
                    scale: 0,
                    opacity: 0,
                    rotation: Math.random() * 360,
                    duration: 1 + Math.random(),
                    ease: "power2.out",
                    onComplete: () => sparkle.remove()
                });
            }
        }

        // Create heart burst from image
        function createHeartBurst(image) {
            const rect = image.getBoundingClientRect();
            const centerX = rect.left + rect.width / 2;
            const centerY = rect.top + rect.height / 2;

            const hearts = ['💙', '💙', '🌊', '💙', '💙'];

            for (let i = 0; i < 12; i++) {
                const heart = document.createElement('div');
                heart.textContent = hearts[Math.floor(Math.random() * hearts.length)];
                heart.style.position = 'fixed';
                heart.style.left = centerX + 'px';
                heart.style.top = centerY + 'px';
                heart.style.pointerEvents = 'none';
                heart.style.zIndex = '1000';
                heart.style.fontSize = '1.5rem';

                document.body.appendChild(heart);

                const angle = (i / 12) * Math.PI * 2;
                const distance = 80 + Math.random() * 60;

                gsap.to(heart, {
                    x: Math.cos(angle) * distance,
                    y: Math.sin(angle) * distance,
                    scale: 0,
                    opacity: 0,
                    rotation: Math.random() * 360,
                    duration: 1.5,
                    ease: "power2.out",
                    onComplete: () => heart.remove()
                });
            }
        }

        // Play love sound effect
        function playLoveSound() {
            if (this.audioContext) {
                // Create a sweet bell-like sound
                const oscillator = this.audioContext.createOscillator();
                const gainNode = this.audioContext.createGain();

                oscillator.connect(gainNode);
                gainNode.connect(this.audioContext.destination);

                oscillator.frequency.setValueAtTime(800, this.audioContext.currentTime);
                oscillator.frequency.exponentialRampToValueAtTime(1200, this.audioContext.currentTime + 0.2);
                gainNode.gain.setValueAtTime(0.1, this.audioContext.currentTime);
                gainNode.gain.exponentialRampToValueAtTime(0.001, this.audioContext.currentTime + 0.5);

                oscillator.start(this.audioContext.currentTime);
                oscillator.stop(this.audioContext.currentTime + 0.5);
            }
        }

        // Create greeting sparkles
        function createGreetingSparkles(element) {
            const rect = element.getBoundingClientRect();
            const specialEmojis = ['✨', '💙', '💎', '🌊', '💙', '💎', '✨', '🦋'];

            for (let i = 0; i < 12; i++) {
                const sparkle = document.createElement('div');
                sparkle.textContent = specialEmojis[Math.floor(Math.random() * specialEmojis.length)];
                sparkle.style.position = 'fixed';
                sparkle.style.left = (rect.left + Math.random() * rect.width) + 'px';
                sparkle.style.top = (rect.top + Math.random() * rect.height) + 'px';
                sparkle.style.pointerEvents = 'none';
                sparkle.style.zIndex = '1000';
                sparkle.style.fontSize = (0.8 + Math.random() * 0.7) + 'rem';

                document.body.appendChild(sparkle);

                gsap.to(sparkle, {
                    y: -80 - Math.random() * 60,
                    x: (Math.random() - 0.5) * 120,
                    scale: 0,
                    opacity: 0,
                    rotation: Math.random() * 720,
                    duration: 2 + Math.random(),
                    ease: "power2.out",
                    onComplete: () => sparkle.remove()
                });
            }
        }

        // Create greeting celebration
        function createGreetingCelebration(element) {
            const rect = element.getBoundingClientRect();
            const centerX = rect.left + rect.width / 2;
            const centerY = rect.top + rect.height / 2;

            const celebrationEmojis = ['✨', '💫', '💙', '💙', '💎', '💙', '💙', '💙', '🦋', '✨', '💫', '💙'];

            // Create celebration burst
            for (let i = 0; i < 20; i++) {
                const element = document.createElement('div');
                element.textContent = celebrationEmojis[Math.floor(Math.random() * celebrationEmojis.length)];
                element.style.position = 'fixed';
                element.style.left = centerX + 'px';
                element.style.top = centerY + 'px';
                element.style.pointerEvents = 'none';
                element.style.zIndex = '1000';
                element.style.fontSize = (1 + Math.random() * 0.8) + 'rem';

                document.body.appendChild(element);

                const angle = (i / 20) * Math.PI * 2;
                const distance = 100 + Math.random() * 150;

                gsap.to(element, {
                    x: Math.cos(angle) * distance,
                    y: Math.sin(angle) * distance - Math.random() * 100,
                    scale: 0,
                    opacity: 0,
                    rotation: Math.random() * 720,
                    duration: 2.5 + Math.random(),
                    ease: "power2.out",
                    onComplete: () => element.remove()
                });
            }

            // Create confetti rain
            for (let i = 0; i < 15; i++) {
                setTimeout(() => {
                    const confetti = document.createElement('div');
                    confetti.textContent = '🎊';
                    confetti.style.position = 'fixed';
                    confetti.style.left = Math.random() * window.innerWidth + 'px';
                    confetti.style.top = '-20px';
                    confetti.style.pointerEvents = 'none';
                    confetti.style.zIndex = '1000';
                    confetti.style.fontSize = '1.5rem';

                    document.body.appendChild(confetti);

                    gsap.to(confetti, {
                        y: window.innerHeight + 50,
                        x: (Math.random() - 0.5) * 200,
                        rotation: Math.random() * 720,
                        duration: 3 + Math.random() * 2,
                        ease: "power1.out",
                        onComplete: () => confetti.remove()
                    });
                }, i * 100);
            }
        }

        // Create music visualization effect
        function createMusicVisualization() {
            const letterSection = document.querySelector('#letter');
            if (!letterSection) return;

            // Create musical notes floating effect
            const musicNotes = ['♪', '♫', '♬', '🎵', '🎶'];

            for (let i = 0; i < 8; i++) {
                setTimeout(() => {
                    const note = document.createElement('div');
                    note.textContent = musicNotes[Math.floor(Math.random() * musicNotes.length)];
                    note.style.position = 'fixed';
                    note.style.left = Math.random() * window.innerWidth + 'px';
                    note.style.bottom = '0px';
                    note.style.fontSize = (1.5 + Math.random() * 0.5) + 'rem';
                    note.style.color = '#8b5cf6';
                    note.style.pointerEvents = 'none';
                    note.style.zIndex = '1000';
                    note.style.opacity = '0.8';

                    document.body.appendChild(note);

                    gsap.to(note, {
                        y: -window.innerHeight - 50,
                        x: (Math.random() - 0.5) * 200,
                        rotation: Math.random() * 360,
                        opacity: 0,
                        duration: 4 + Math.random() * 2,
                        ease: "power1.out",
                        onComplete: () => note.remove()
                    });
                }, i * 500);
            }

            // Add gentle pulsing effect to letter paper
            const letterPaper = document.querySelector('.letter-paper');
            if (letterPaper) {
                gsap.to(letterPaper, {
                    boxShadow: '0 0 30px rgba(139, 92, 246, 0.3)',
                    duration: 2,
                    yoyo: true,
                    repeat: 3,
                    ease: "power2.inOut"
                });
            }
        }

        // Show music start notification
        function showMusicStartNotification() {
            const notification = document.createElement('div');
            notification.innerHTML = `
                <div class="flex items-center space-x-2">
                    <span class="text-2xl">🎵</span>
                    <span class="dancing-script">Nhạc đã bắt đầu phát...</span>
                </div>
            `;
            notification.className = 'fixed top-20 right-6 bg-white bg-opacity-90 text-purple-700 px-6 py-3 rounded-2xl shadow-lg backdrop-blur-sm border border-pink-200 z-50 transform translate-x-full transition-transform duration-500';

            document.body.appendChild(notification);

            // Slide in
            setTimeout(() => {
                notification.style.transform = 'translateX(0)';
            }, 100);

            // Slide out and remove
            setTimeout(() => {
                notification.style.transform = 'translateX(100%)';
                setTimeout(() => notification.remove(), 500);
            }, 3000);
        }

        // Create petals function
        function createPetals(flowerElement) {
            const rect = flowerElement.getBoundingClientRect();
            const centerX = rect.left + rect.width / 2;
            const centerY = rect.top + rect.height / 2;

            for (let i = 0; i < 8; i++) {
                const petal = document.createElement('div');
                petal.textContent = '🌸';
                petal.style.position = 'fixed';
                petal.style.left = centerX + 'px';
                petal.style.top = centerY + 'px';
                petal.style.fontSize = '1.5rem';
                petal.style.pointerEvents = 'none';
                petal.style.zIndex = '100';

                document.body.appendChild(petal);

                const angle = (i / 8) * Math.PI * 2;
                const distance = 100;

                gsap.to(petal, {
                    x: Math.cos(angle) * distance,
                    y: Math.sin(angle) * distance,
                    rotation: Math.random() * 360,
                    opacity: 0,
                    duration: 2,
                    ease: "power2.out",
                    onComplete: () => {
                        petal.remove();
                    }
                });
            }
        }

        // Smooth scroll for all sections
        gsap.utils.toArray('section').forEach(section => {
            gsap.fromTo(section, {
                opacity: 0.8
            }, {
                opacity: 1,
                duration: 1,
                scrollTrigger: {
                    trigger: section,
                    start: "top 50%",
                    end: "bottom 50%",
                    toggleActions: "play none none reverse"
                }
            });
        });

        // Typewriter effect for letter
        function typeWriter(element, text, speed = 50) {
            let i = 0;
            element.innerHTML = '';

            function type() {
                if (i < text.length) {
                    element.innerHTML += text.charAt(i);
                    i++;
                    setTimeout(type, speed);
                }
            }

            type();
        }

        // Initialize typewriter when letter section comes into view
        ScrollTrigger.create({
            trigger: "#letter",
            start: "top 50%",
            onEnter: () => {
                // Auto play music when entering letter section
                if (!isPlaying) {
                    bgMusic.play().then(() => {
                        musicToggle.textContent = '⏸️';
                        isPlaying = true;
                        console.log('Music started automatically when entering letter section');

                        // Show gentle notification
                        showMusicStartNotification();
                    }).catch(e => {
                        console.log('Auto-play prevented by browser policy:', e);
                    });
                }

                // Start typewriter effects
                const typewriterTexts = document.querySelectorAll('.typewriter-text');
                typewriterTexts.forEach((text, index) => {
                    setTimeout(() => {
                        const originalText = text.textContent;
                        typeWriter(text, originalText);
                    }, index * 3000);
                });
            }
        });

        // Add scroll indicator
        const scrollIndicator = document.createElement('div');
        scrollIndicator.innerHTML = '⬇️';
        scrollIndicator.className = 'fixed bottom-10 left-1/2 transform -translate-x-1/2 text-2xl animate-bounce text-blue-500 z-50';
        document.body.appendChild(scrollIndicator);

        // Hide scroll indicator when not at top
        window.addEventListener('scroll', () => {
            if (window.scrollY > 100) {
                scrollIndicator.style.opacity = '0';
            } else {
                scrollIndicator.style.opacity = '1';
            }
        });
    </script>

    <!-- Include external JavaScript file -->
    <script src="script.js"></script>
</body>

</html>